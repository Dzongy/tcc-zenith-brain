<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZENITH â€” The Architect</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: #0a0a0f; color: #e0e0e0; min-height: 100vh; }
        .header { background: linear-gradient(135deg, #0d0d1a 0%, #1a0a0a 100%); padding: 2.5rem 1rem; text-align: center; border-bottom: 2px solid #e94560; }
        .header h1 { font-size: 2.5rem; color: #e94560; letter-spacing: 4px; text-transform: uppercase; }
        .header .lobster { font-size: 3rem; display: block; margin-bottom: 0.5rem; }
        .header p { color: #8892b0; margin-top: 0.5rem; font-size: 0.95rem; font-style: italic; }
        .container { max-width: 800px; margin: 2rem auto; padding: 0 1.5rem; }
        .card { background: #12121f; border: 1px solid #2a2a4a; border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; }
        .card h2 { color: #e94560; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 1rem; border-bottom: 1px solid #2a2a4a; padding-bottom: 0.5rem; }
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; }
        .stat { text-align: center; padding: 1rem; background: #0a0a14; border-radius: 8px; border: 1px solid #1a1a2e; }
        .stat .label { font-size: 0.75rem; color: #6b7280; text-transform: uppercase; letter-spacing: 1px; }
        .stat .value { font-size: 1.4rem; font-weight: 700; color: #e94560; margin-top: 0.3rem; }
        .stat .value.online { color: #10b981; }
        input, textarea { width: 100%; padding: 0.75rem; background: #0a0a14; border: 1px solid #2a2a4a; border-radius: 8px; color: #e0e0e0; font-size: 0.95rem; margin-bottom: 0.75rem; font-family: inherit; }
        input:focus, textarea:focus { outline: none; border-color: #e94560; }
        button { padding: 0.75rem 1.5rem; background: #e94560; color: #fff; border: none; border-radius: 8px; cursor: pointer; font-size: 0.95rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; transition: background 0.2s; }
        button:hover { background: #d63851; }
        button:disabled { background: #555; cursor: not-allowed; }
        .log { background: #0a0a14; border: 1px solid #1a1a2e; border-radius: 8px; padding: 1rem; font-family: 'Courier New', monospace; font-size: 0.85rem; color: #10b981; max-height: 200px; overflow-y: auto; white-space: pre-wrap; margin-top: 0.75rem; }
        .footer { text-align: center; padding: 2rem; color: #3a3a5a; font-size: 0.8rem; }
    </style>
</head>
<body>
    <div class="header">
        <span class="lobster">&#x1F99E;</span>
        <h1>ZENITH</h1>
        <p>The Architect &mdash; Sovereign Intelligence</p>
    </div>
    <div class="container">
        <div class="card">
            <h2>System Status</h2>
            <div class="status-grid" id="statusGrid">
                <div class="stat"><div class="label">Status</div><div class="value" id="sysStatus">--</div></div>
                <div class="stat"><div class="label">Name</div><div class="value" id="sysName">--</div></div>
                <div class="stat"><div class="label">Version</div><div class="value" id="sysVersion">--</div></div>
                <div class="stat"><div class="label">Uptime</div><div class="value" id="sysUptime">--</div></div>
            </div>
            <button onclick="checkStatus()" style="margin-top:1rem;width:100%;">Check Status</button>
        </div>

        <div class="card">
            <h2>Soul Authentication</h2>
            <input type="password" id="soulPhrase" placeholder="Enter sovereign phrase..." />
            <button onclick="authenticate()" style="width:100%;">Authenticate</button>
            <div class="log" id="soulLog">Awaiting authentication...</div>
        </div>

        <div class="card">
            <h2>Submit Mission</h2>
            <input type="text" id="missionTitle" placeholder="Mission title..." />
            <textarea id="missionObjective" rows="3" placeholder="Objective..."></textarea>
            <select id="missionStatus" style="width:100%;padding:0.75rem;background:#0a0a14;border:1px solid #2a2a4a;border-radius:8px;color:#e0e0e0;font-size:0.95rem;margin-bottom:0.75rem;">
                <option value="active">Active</option>
                <option value="pending">Pending</option>
                <option value="complete">Complete</option>
            </select>
            <button onclick="submitMission()" id="missionBtn" disabled style="width:100%;">Submit Mission</button>
            <div class="log" id="missionLog">Authenticate first to submit missions.</div>
        </div>
    </div>
    <div class="footer">ZENITH Sovereignty Dashboard &mdash; TCC 2026</div>

    <script>
        let soulToken = null;

        async function checkStatus() {
            try {
                const res = await fetch('/api/status', { headers: { 'X-Auth': 'amos-bridge-2026' } });
                const data = await res.json();
                document.getElementById('sysStatus').textContent = data.status || 'error';
                document.getElementById('sysStatus').className = 'value' + (data.status === 'online' ? ' online' : '');
                document.getElementById('sysName').textContent = data.name || '--';
                document.getElementById('sysVersion').textContent = data.version || '--';
                const mins = Math.floor((data.uptime || 0) / 60);
                const secs = Math.floor((data.uptime || 0) % 60);
                document.getElementById('sysUptime').textContent = mins + 'm ' + secs + 's';
            } catch (e) {
                document.getElementById('sysStatus').textContent = 'ERROR';
            }
        }

        async function authenticate() {
            const phrase = document.getElementById('soulPhrase').value;
            const log = document.getElementById('soulLog');
            try {
                const res = await fetch('/api/soul', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ phrase })
                });
                const data = await res.json();
                if (data.authenticated) {
                    soulToken = data.token;
                    log.textContent = 'Authenticated. Token: ' + data.token.substring(0, 16) + '...';
                    log.style.color = '#10b981';
                    document.getElementById('missionBtn').disabled = false;
                    document.getElementById('missionLog').textContent = 'Ready to submit missions.';
                } else {
                    log.textContent = 'Authentication failed: ' + (data.error || 'unknown');
                    log.style.color = '#e94560';
                }
            } catch (e) {
                log.textContent = 'Error: ' + e.message;
                log.style.color = '#e94560';
            }
        }

        async function submitMission() {
            if (!soulToken) return;
            const log = document.getElementById('missionLog');
            try {
                const res = await fetch('/api/mission', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + soulToken
                    },
                    body: JSON.stringify({
                        title: document.getElementById('missionTitle').value,
                        objective: document.getElementById('missionObjective').value,
                        status: document.getElementById('missionStatus').value
                    })
                });
                const data = await res.json();
                log.textContent = 'Mission created: ' + JSON.stringify(data, null, 2);
                log.style.color = '#10b981';
                document.getElementById('missionTitle').value = '';
                document.getElementById('missionObjective').value = '';
            } catch (e) {
                log.textContent = 'Error: ' + e.message;
                log.style.color = '#e94560';
            }
        }

        // Auto-check status on load
        checkStatus();
    </script>
</body>
</html>